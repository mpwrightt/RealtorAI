# Neighborhood Deal Finder - Project Overview

## Executive Summary
A modern real estate platform leveraging Claude Agent SDK via OpenRouter and AG-UI protocol to provide intelligent, real-time property search and analysis for buyers, sellers, and agents.

## Core Technology Stack

### Frontend
- **Next.js 15** with App Router
- **React 19** with Server Components
- **TailwindCSS v4** for styling
- **shadcn/ui** component library
- **Framer Motion** for animations

### Backend & AI
- **Convex** - Real-time database and serverless functions
- **OpenRouter** - AI model routing (Claude 3.5 Sonnet primary)
- **AG-UI Protocol** - Agent-user interaction framework
- **Claude Agent SDK patterns** - Agentic workflows

### Authentication & Services
- **Clerk** - Authentication and user management
- **Mapbox** - Maps and geocoding
- **MLS API** - Property listings data
- **Third-party APIs** - Schools, walk scores, amenities

## Project Structure

```
plan/
├── README.md                           # Overview and navigation
├── PROJECT-OVERVIEW.md                 # This file
│
├── phase-1-foundation/
│   ├── task-1.1-environment-setup.md   # OpenRouter, env vars, testing
│   └── task-1.2-database-schema.md     # Convex schema design
│
├── phase-2-backend/
│   ├── task-2.1-convex-functions.md    # All backend functions
│   ├── task-2.2-openrouter-service.md  # AI service layer
│   └── task-2.3-external-apis.md       # MLS, Mapbox, enrichment
│
├── phase-3-buyer-portal/
│   ├── task-3.1-buyer-routes.md        # Session-based routing
│   ├── task-3.2-buyer-components.md    # Property cards, galleries, etc.
│   └── task-3.3-ai-chat-widget.md      # Streaming AI chat
│
├── phase-4-seller-portal/
│   ├── task-4.1-seller-dashboard.md    # Analytics and insights
│   └── task-4.2-offer-management.md    # Offer review and AI analysis
│
├── phase-5-agent-center/
│   └── task-5.1-agent-dashboard.md     # Multi-session management
│
├── phase-6-ag-ui/
│   └── task-6.1-ag-ui-integration.md   # Real-time event streaming
│
├── phase-7-testing/
│   ├── task-7.1-testing-strategy.md    # Unit, integration, E2E tests
│   └── task-7.2-optimization.md        # Performance tuning
│
└── phase-8-deployment/
    ├── task-8.1-production-setup.md    # Security, monitoring
    └── task-8.2-launch.md              # Deployment and verification
```

## Key Features

### For Buyers
- **Personalized Portal** with unique session codes
- **AI-Powered Matching** based on preferences
- **Interactive Property Details** with enriched data
- **Real-Time AI Chat** for property questions
- **Offer Submission** with guided workflows
- **Saved Searches** and favorites

### For Sellers
- **Real-Time Analytics** dashboard
- **Engagement Tracking** (views, saves, time-on-page)
- **AI Offer Analysis** with strengths/risks/recommendations
- **Visitor Insights** and demographics
- **Offer Management** (accept/reject/counter)

### For Agents
- **Multi-Listing Management**
- **Session Generation** for buyers and sellers
- **Performance Analytics** across all listings
- **Bulk Operations** and mass communications
- **AI Activity Monitoring** with AG-UI transparency

## OpenRouter Integration

### Why OpenRouter?
- **Multi-model support** (Claude, GPT-4, Gemini, etc.)
- **Cost optimization** with automatic fallbacks
- **No vendor lock-in** - easy model switching
- **Built-in rate limiting** and error handling
- **Usage analytics** and cost tracking

### Implementation
- OpenAI-compatible SDK for simple integration
- Custom tool definitions for real estate domain
- Streaming responses for real-time interaction
- Context-aware conversations with session data

## AG-UI Protocol Integration

### Benefits
- **Transparent AI reasoning** with visible tool calls
- **Tool approval workflow** for sensitive operations
- **Real-time event streaming** (messages, tools, state)
- **State inspection** for debugging
- **Interactive elements** generated by AI

### Event Types
- `message` - User/assistant messages
- `content` - Streaming text chunks
- `tool_call` - AI requesting tool execution
- `tool_result` - Tool execution results
- `state_update` - Session state changes
- `done` - Completion signal
- `error` - Error events

## Data Architecture

### Core Tables (Convex)
- **users** - Clerk synced user data
- **agents** - Real estate agent profiles
- **listings** - Property listings with enriched data
- **buyerSessions** - Buyer portal sessions
- **sellerSessions** - Seller portal sessions
- **offers** - Purchase offers with AI analysis
- **propertyViews** - Telemetry and analytics
- **agentInteractions** - AI conversation logs
- **savedSearches** - Buyer saved search criteria

### Data Flow
1. **Agent** creates listing with basic info
2. **Enrichment pipeline** adds schools, walk scores, comps
3. **Buyer sessions** get personalized property matches
4. **AI agents** analyze properties and answer questions
5. **Telemetry** tracks engagement for seller analytics
6. **Offers** trigger AI analysis and notifications

## Security & Privacy

- **Session-based access** (no user accounts for buyers/sellers)
- **Clerk authentication** for agents
- **API key protection** (server-side only)
- **Webhook signature verification**
- **Rate limiting** on all endpoints
- **HTTPS enforced** with security headers
- **Role-based permissions** via Convex queries

## Performance Targets

- **LCP < 2.5s** (Largest Contentful Paint)
- **FID < 100ms** (First Input Delay)
- **CLS < 0.1** (Cumulative Layout Shift)
- **API responses < 500ms**
- **AI streaming < 2s to first token**
- **Bundle size < 300KB gzipped**

## Development Timeline

### Phase 1: Foundation (Week 1)
Setup, schema design, environment configuration

### Phase 2: Backend (Week 2-3)
Convex functions, OpenRouter service, external APIs

### Phase 3: Buyer Portal (Week 4-5)
Routes, components, AI chat integration

### Phase 4: Seller Portal (Week 6)
Analytics dashboard, offer management

### Phase 5: Agent Center (Week 7)
Multi-session management, admin tools

### Phase 6: AG-UI (Week 8)
Event streaming, tool approval, state inspection

### Phase 7: Testing (Week 9-10)
Unit tests, E2E tests, performance optimization

### Phase 8: Deployment (Week 11)
Production setup, launch, monitoring

## MVP vs Full Features

### Minimum Viable (6 weeks)
- Phases 1-3 (Foundation + Backend + Buyer Portal)
- Basic AG-UI (streaming chat only)
- Essential testing
- Simple deployment

### Full Featured (11 weeks)
- All 8 phases
- Complete AG-UI integration
- Comprehensive testing
- Production-grade deployment

## Future Enhancements

### Phase 9 (Post-Launch)
- Mobile native apps (React Native)
- SMS notifications
- Email automation
- CRM integrations
- Advanced analytics dashboard
- Multi-language support
- Virtual tour integration
- Document management
- E-signature integration
- Referral system

### Advanced AI Features
- Predictive pricing models
- Market trend analysis
- Automated comps reports
- Property value predictions
- Investment ROI calculators
- Neighborhood trend forecasting

## Success Metrics

### Technical
- 99.9% uptime
- < 0.1% error rate
- 90+ Lighthouse score
- < 500ms average API response

### Business
- Agent signups
- Active buyer sessions
- Properties listed
- Offers submitted
- Conversion rate (view → offer)
- User satisfaction score

## Documentation

### For Developers
- Setup guide (README.md)
- API documentation
- Component library
- Database schema docs
- Deployment guide

### For Users
- Agent onboarding
- Buyer portal guide
- Seller dashboard guide
- Video tutorials
- FAQ

## Support & Maintenance

### Monitoring
- Sentry error tracking
- Vercel Analytics
- Custom event tracking
- Performance monitoring
- Uptime monitoring

### Updates
- Security patches (immediate)
- Bug fixes (weekly)
- Feature releases (bi-weekly)
- Dependency updates (monthly)

## Team & Roles

### Recommended Team
- **Full-stack developer** (primary)
- **AI/ML specialist** (OpenRouter integration)
- **UI/UX designer** (optional)
- **QA engineer** (testing phase)
- **DevOps** (deployment)

### Solo Developer Path
Focus on MVP (6 weeks), use AI assistance for design, gradual feature addition post-launch.

## Getting Started

1. Review this overview
2. Read `plan/README.md` for navigation
3. Start with Phase 1, Task 1.1
4. Follow task order within each phase
5. Check off subtasks as completed
6. Test thoroughly after each task
7. Deploy incrementally to staging

## Questions?

- Check individual task files for details
- Review referenced files for implementation examples
- Consult external documentation for libraries
- Test frequently and iterate

---

**Built with ❤️ using Next.js, Convex, OpenRouter, and AG-UI**
